<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />
    <meta name="viewport" content="height=device-height,initial-scale=1,shrink-to-fit=no" />
    <link rel="icon" href="https://cdn3.iconfinder.com/data/icons/movies-4/48/pokemon-movie-cinema-ball-512.png">
    <link rel='stylesheet' href="style.css" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <title>SQA Dashboard</title>
    <script>
        const TEXTAREA_WIDTH = 40   

        function createElement(element, attribute, inner) {
            if (typeof (element) === "undefined") {
                return false;
            }
            if (typeof (inner) === "undefined") {
                inner = "";
            }
            var el = document.createElement(element);
            if (typeof (attribute) === 'object') {
                for (var key in attribute) {
                    el.setAttribute(key, attribute[key]);
                }
            }

            if (!Array.isArray(inner)) {
                inner = [inner];
            }

            for (var k = 0; k < inner.length; k++) {
                if (inner[k].tagName) {
                    el.appendChild(inner[k]);
                } else {
                    el.appendChild(document.createTextNode(inner[k]));
                }
            }
            return el;
        }

        class CollectionContainer{
            constructor(json_colls = [{'New Collection': []}], HTML_element = 'collections'){
                this.body = []
                this.HTML = document.getElementById(HTML_element)

                let coll;
                for (let i in json_colls){
                    let coll = new Collection(json_colls[i])
                    this.body.push(coll)
                    this.HTML.appendChild(coll.HTML.main)
                }
            }
        }

        class Collection{
            constructor(json_coll = {'New Collection': []}){
                this.title = Object.keys(json_coll)[0];
                json_coll = json_coll[this.title]
                this.body = []
                this.HTML = {}
                this.HTML.main = createElement('div', {class: 'collection'})
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'collection-head'})
                this.HTML.head.title = createElement('input', {class: 'collection-title', value: this.title, disabled: true}, )
                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )

                for (let name in this.HTML.head)
                    if (name != 'main')
                        this.HTML.head.main.appendChild( this.HTML.head[name])

                this.HTML.main.appendChild(this.HTML.head.main)

                this.HTML.body = createElement('div', {class: 'collection-body'})
                this.HTML.main.appendChild(this.HTML.body)

                let json_cont;
                for (let i in json_coll){
                    json_cont = json_coll[i]
                    this.add(json_cont)
                }
            }

            add(json_cont){
                let cont = new Container(json_cont)
                this.body.push(cont)
                this.HTML.body.appendChild(cont.HTML.main)
            }
        }

        class Container{
            constructor(json_cont = {'New Container': ''}){
                this.title = Object.keys(json_cont)[0]
                json_cont = json_cont[this.title]
                this.body = []
                this.HTML = {}
                this.HTML.main = createElement('div', {class: 'container'})
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'container-head'})
                
                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )
                this.HTML.head.title = createElement('input', {class: 'container-title', value: this.title, disabled: true}, )
                
                for (let name in this.HTML.head)
                    if (name != 'main')
                        this.HTML.head.main.appendChild( this.HTML.head[name])
                
                this.HTML.main.appendChild(this.HTML.head.main)
                
                this.HTML.body = createElement('ul', {class: 'container-body'})
                this.HTML.main.appendChild(this.HTML.body)

                let json_item;
                for (let i in json_cont){
                    json_item = json_cont[i]
                    this.add(json_item)
                }
            }

            add(json_item = {'New Item': ['Empty URL']}){
                let item = new Item(json_item)
                this.body.push(item)
                this.HTML.body.appendChild(item.HTML.main)
            }
        }

        class Item{
            constructor(json_item = {'New Item': ['Empty URL']}){
                console.log(json_item)
                this.title = Object.keys(json_item)[0]
                json_item = json_item[this.title]
                if (!(json_item instanceof Array))
                    json_item = [json_item]
                this.url = json_item[0]
                this.children = []

                this.HTML = {}
                this.HTML.main = createElement('li', {class: 'item'})
                
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'item-head'})
                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )
                this.HTML.head.title = createElement('input', {class: 'item-title', value: this.title, disabled: true}, )
                this.HTML.head['expand-button'] = createElement('button', {class: 'little-button expand-button'},'V' )
                for (let name in this.HTML.head)
                    if (name != 'main')
                        this.HTML.head.main.appendChild( this.HTML.head[name])

                this.HTML.main.appendChild(this.HTML.head.main)

                // Create item's HTML representation
                this.HTML.body = createElement('ul', {class: 'item-body'})
                this.HTML['url'] = createElement('input', {class: 'item-url', value: this.url, disabled: true}, )
                this.HTML.body.appendChild( createElement('li',{class: 'item-content'},this.HTML['url'])  )
                this.HTML.main.appendChild(this.HTML.body)
            }
        }

        var reg = /(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g
        var bookmarks = [{'Main Collection': [{'🌐Search Engines': [{'*🔎Google': 'https://www.google.com'}, {'🧷Bing': 'https://www.Bing.com'}]}, {'📢 Social Media': [{'💠Facebook': ['https://www.facebook.com', {"All of Facebook's apps": ''}, {'📸Instegram': 'https://www.instegram.com'}, {'✔️Whatsapp': 'https://web.whatsapp.com'}]}, {'🌀Twitter': 'https://www.twitter.com'}, {'🔻Youtube': 'https://www.youtube.com'}]}, {'📰News Sites': [{'Popular News Sites': ''}, {'🦊 FOX': 'https://www.foxnews.com'}, {'☕️ BBC': 'https://www.bbc.com/news'}, {'🏈 ESPN': 'https://www.espn.com/'}]}]}, {'Created By': [{'Yair Charit': [{'👨🏽\u200d💻 See some more of my work 👨🏽\u200d💻': ''}, {'*👓Portfolio': 'https://yaircharit.github.io'}, {'*💼LinkedIn': 'https://il.linkedin.com/in/yair-charit'}, {'*👷🏽\u200d♂️ Github': 'https://github.com/yaircharit'}]}]}]
        // %INJECT BOOKMARKS HERE%
        // document.staticMarks will be inserted above. the line below is only for testing purposes
        // %INJECT NEWSFEED HERE%
    </script>
</head>

<body>

    <div id="collections"></div>

    <script>
        let cc = new CollectionContainer(bookmarks, 'collections')
    </script>
    <!-- <div class="background"></div>
    <div id="topbar">

        <div id="news_placeholder" class="vwrap"><img src="BW Logo.png"
                style="height: 3em;  border-radius: 0 0 25px 25px;"></div>

    </div> -->
   
    <!-- <footer>
        <div style="float:right; flex-direction: column; display: none; ">
            <button id='interButton' class="intButton editButton" onclick='interactionButton()'>Edit</button>
            <button id="downloadButton" class="intButton saveButton"
                onclick="downloadButtonClick()">Download</button></a>
        </div> -->
        <!-- <div style="float:right; bottom: 0; flex-direction: column; display: flex; padding: 1em;  ">
            <p style="margin: 0%;">Made by Yair Charit</p>
            <a href="https://github.com/yaircharit/Dashboard-Plus">Git Repository</a>
        </div> -->

        <!-- <script>
            


            news_placeholder = document.getElementById('news_placeholder')
            generateNews(document.newsFeed)
            placeholder = document.getElementById('placeholder')
            interButton = document.getElementById('interButton')
            temp = generateCollection(document.staticMarks)
            for (collection in temp)
                placeholder.appendChild(temp[collection])
            placeholder.appendChild(createElement('center', {}, createElement('button', { class: 'littleButton addNewButton addNewCollectionButton expandable', onclick: 'addNewButtonClick(this,0)' }, '+')))

            toggleVisibility(document.getElementsByClassName('expandable'))
            toggleVisibility(document.getElementsByClassName('addNewButton'), 'none')
            toggleVisibility(document.getElementsByTagName('TEXTAREA'), 'none')

            function downloadButtonClick() {
                let temp = document.documentElement.innerHTML.substr(0, document.documentElement.innerHTML.search('<body>'))
                temp += '<body>\n<div class="background"><\/div>\n<div id="placeholder"><\/div>\n<div id="news_placeholder" class="vwrap"><\/div>'
                temp += document.documentElement.innerHTML.substr(document.documentElement.innerHTML.search('<footer>'))
                temp = temp.replace(/\t\t\tdocument\.staticMarks =.*{.*\n/g, `\t\t\tdocument.staticMarks = ${JSON.stringify(document.staticMarks)}\n`)
                var element = document.createElement('a');
                element.setAttribute('href', `data:text/html;charset=utf-8,${encodeURIComponent(temp)}`);
                element.setAttribute('download', 'MatrixDashboard.html');

                element.style.display = 'none';
                document.body.appendChild(element);

                element.click();

                document.body.removeChild(element);
            }
        </script>
    </footer> -->
</body>

</html>