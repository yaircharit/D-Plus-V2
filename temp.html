<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no" />
    <meta name="viewport" content="height=device-height,initial-scale=1,shrink-to-fit=no" />
    <link rel="icon" href="https://cdn3.iconfinder.com/data/icons/movies-4/48/pokemon-movie-cinema-ball-512.png">
    <link rel='stylesheet' href="style.css" />
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
    <title>SQA Dashboard</title>
    <script>
        const TEXTAREA_WIDTH = 40   

        function createElement(element, attribute, inner) {
            if (typeof (element) === "undefined") {
                return false;
            }
            if (typeof (inner) === "undefined") {
                inner = "";
            }
            var el = document.createElement(element);
            if (typeof (attribute) === 'object') {
                for (var key in attribute) {
                    el.setAttribute(key, attribute[key]);
                }
            }

            if (!Array.isArray(inner)) {
                inner = [inner];
            }

            for (var k = 0; k < inner.length; k++) {
                if (inner[k].tagName) {
                    el.appendChild(inner[k]);
                } else {
                    el.appendChild(document.createTextNode(inner[k]));
                }
            }
            return el;
        }

        class Collection{
            constructor(title = 'Empty Collection'){
                this.title = title;
                this.body = []
                this.HTML = {}
                this.HTML.main = createElement('div', {class: 'collection'})
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'collection-head'})
                this.HTML.head.title = createElement('input', {class: 'collection-title', value: this.title, disabled: true}, )
                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )
                this.HTML.head.main.appendChild( this.HTML.head['delete-button'])
                this.HTML.head.main.appendChild( this.HTML.head.title)
                this.HTML.main.appendChild(this.HTML.head.main)

                this.HTML.body = createElement('div', {class: 'collection-body'})
                this.HTML.main.appendChild(this.HTML.body)
                this.addContainer('First Container')
                collections_div.appendChild(this.HTML.main)
            }

            addContainer(title = 'Empty Container'){
                let cont = new Container(title)
                this.body.push(cont)
                this.HTML.body.appendChild(cont.HTML.main)
            }
        }

        class Container{
            constructor(title = 'Empty Container'){
                this.title = title
                this.body = []
                this.HTML = {}
                this.HTML.main = createElement('div', {class: 'container'})
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'container-head'})
                
                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )
                this.HTML.head.main.appendChild( this.HTML.head['delete-button'])
                this.HTML.head.title = createElement('input', {class: 'container-title', value: this.title, disabled: true}, )
                this.HTML.head.main.appendChild( this.HTML.head.title)
                
                this.HTML.main.appendChild(this.HTML.head.main)
                
                this.HTML.body = createElement('ul', {class: 'container-body'})
                this.HTML.main.appendChild(this.HTML.body)

                this.addItem('First Item', 'URLURK')
            }

            addItem(title = 'Empty Item', url = ''){
                let item = new Item(title, url)
                this.body.push(item)
                this.HTML.body.appendChild(item.HTML.main)
            }
        }

        class Item{
            constructor(title = 'Empty Item', url = ''){
                this.title = title
                this.url = url
                this.children = []

                this.HTML = {}
                this.HTML.main = createElement('li', {class: 'item'})
                
                this.HTML.head = {}
                this.HTML.head.main = createElement('div', {class: 'item-head'})

                this.HTML.head['delete-button'] = createElement('button', {class: 'little-button delete-button'},'X' )
                this.HTML.head.main.appendChild( this.HTML.head['delete-button'])

                this.HTML.head.title = createElement('input', {class: 'item-title', value: this.title, disabled: true}, )
                this.HTML.head.main.appendChild( this.HTML.head.title)
                
                this.HTML.head['expand-button'] = createElement('button', {class: 'little-button expand-button'},'V' )
                this.HTML.head.main.appendChild( this.HTML.head['expand-button'])

                this.HTML.main.appendChild(this.HTML.head.main)

                this.HTML.body = createElement('ul', {class: 'item-body'})

                this.HTML['url'] = createElement('input', {class: 'item-url', value: this.url, disabled: true}, )
                this.HTML.body.appendChild( createElement('li',{class: 'item-content'},this.HTML['url'])  )
                
                this.HTML.main.appendChild(this.HTML.body)
            }
        }

        var reg = /(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g

    </script>
</head>

<body>

    <div id="collections"></div>

    <script>
        var collections_div = document.getElementById('collections')
        let cl = new Collection('First')
    </script>
    <!-- <div class="background"></div>
    <div id="topbar">

        <div id="news_placeholder" class="vwrap"><img src="BW Logo.png"
                style="height: 3em;  border-radius: 0 0 25px 25px;"></div>

    </div> -->
   
    <!-- <footer>
        <div style="float:right; flex-direction: column; display: none; ">
            <button id='interButton' class="intButton editButton" onclick='interactionButton()'>Edit</button>
            <button id="downloadButton" class="intButton saveButton"
                onclick="downloadButtonClick()">Download</button></a>
        </div> -->
        <!-- <div style="float:right; bottom: 0; flex-direction: column; display: flex; padding: 1em;  ">
            <p style="margin: 0%;">Made by Yair Charit</p>
            <a href="https://github.com/yaircharit/Dashboard-Plus">Git Repository</a>
        </div> -->

        <!-- <script>
            // %INJECT BOOKMARKS HERE%
            // document.staticMarks will be inserted above. the line below is only for testing purposes
            // %INJECT NEWSFEED HERE%


            news_placeholder = document.getElementById('news_placeholder')
            generateNews(document.newsFeed)
            placeholder = document.getElementById('placeholder')
            interButton = document.getElementById('interButton')
            temp = generateCollection(document.staticMarks)
            for (collection in temp)
                placeholder.appendChild(temp[collection])
            placeholder.appendChild(createElement('center', {}, createElement('button', { class: 'littleButton addNewButton addNewCollectionButton expandable', onclick: 'addNewButtonClick(this,0)' }, '+')))

            toggleVisibility(document.getElementsByClassName('expandable'))
            toggleVisibility(document.getElementsByClassName('addNewButton'), 'none')
            toggleVisibility(document.getElementsByTagName('TEXTAREA'), 'none')

            function downloadButtonClick() {
                let temp = document.documentElement.innerHTML.substr(0, document.documentElement.innerHTML.search('<body>'))
                temp += '<body>\n<div class="background"><\/div>\n<div id="placeholder"><\/div>\n<div id="news_placeholder" class="vwrap"><\/div>'
                temp += document.documentElement.innerHTML.substr(document.documentElement.innerHTML.search('<footer>'))
                temp = temp.replace(/\t\t\tdocument\.staticMarks =.*{.*\n/g, `\t\t\tdocument.staticMarks = ${JSON.stringify(document.staticMarks)}\n`)
                var element = document.createElement('a');
                element.setAttribute('href', `data:text/html;charset=utf-8,${encodeURIComponent(temp)}`);
                element.setAttribute('download', 'MatrixDashboard.html');

                element.style.display = 'none';
                document.body.appendChild(element);

                element.click();

                document.body.removeChild(element);
            }
        </script>
    </footer> -->
</body>

</html>